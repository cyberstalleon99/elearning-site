{% extends 'emodule/base.html' %}
{% load static %}
{% load emodule_extras %}

{% block content %}
<!-- Page Banner Section Start -->
<div class="page-banner bg-color-12">
    <div class="page-banner__wrapper">
        <div class="container">

            <!-- Page Breadcrumb Start -->
            <div class="page-breadcrumb">
                <ul class="breadcrumb breadcrumb-white">
                    <li class="breadcrumb-item"><a href="{% url 'emodule:home' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'emodule:subject-detail' module.quarter.subject.id %}">Quarters</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'emodule:quarter-detail' module.quarter.subject.id module.quarter.id %}">{{module.quarter.title}}</a></li>
                    <li class="breadcrumb-item active"><a href="{% url 'emodule:module-detail' module.quarter.subject.id module.quarter.id module.id %}">{{module.title}}</a></li>
                </ul>
            </div>
            <!-- Page Breadcrumb End -->

        </div>
    </div>
</div>
<!-- Page Banner Section End -->

<!-- Tutor Course Top Info Start -->
<div class="tutor-course-top-info section-padding-01 bg-color-12">
    <div class="container custom-container">

        <div class="row gy-10 align-items-center">
            <div class="col-md-7">

                <!-- Tutor Course Top Info Start -->
                <div class="tutor-course-top-info__content">
                    <div class="tutor-course-top-info__badges">
                        <a class="badges-category" href="#">{{module.quarter.title}}</a>
                    </div>
                    <h1 class="tutor-course-top-info__title text-white">{{module.title}}</h1>
                    <div class="tutor-course-top-info__meta">
                        <div class="tutor-course-top-info__meta-instructor">
                            <div class="instructor-avatar">
                                <img src="{% static 'emodule/images/instructor/instructor-01.jpg' %}" alt="Instructor"
                                    width="36" height="36">
                            </div>
                            <div class="instructor-name text-white">{{module.title}}</div>
                        </div>
                        <div class="tutor-course-top-info__meta-update text-white">{% if latest_result.latest.date_taken %}Last Taken {{latest_result.latest.date_taken}}{% elif not module.quiz_set.all %}No activity{% else %}Quiz not yet taken{% endif %}</div>
                    </div>
                </div>
                <!-- Tutor Course Top Info End -->

            </div>
        </div>

    </div>
</div>
<!-- Tutor Course Top Info End -->

<!-- Tutor Course tabs Menu Start -->
<div class="tutor-course-tabs bg-color-13">
    <div class="container custom-container">

        <ul class="nav justify-content-center">
            <li><button class="active" data-bs-toggle="tab" data-bs-target="#tab1">Lessons</button></li>
            {% if module.quiz_list.count %}<li><button data-bs-toggle="tab" data-bs-target="#tab2">Activity</button></li>{% endif %}
            {% if module.videolesson_set.count %}<li><button data-bs-toggle="tab" data-bs-target="#tab2">Vide</button></li>{% endif %}
            {% if module.performancetask_set.count %}<li><button data-bs-toggle="tab" data-bs-target="#tab2">Performance Task</button></li>{% endif %}
        </ul>

    </div>
</div>
<!-- Tutor Course tabs Menu End -->

<!-- Tutor Course Main content Start -->
<div class="tutor-course-main-content bg-color-05 section-padding-01 sticky-parent">
    <div class="container custom-container">

        <div class="row gy-10">
            <div class="col-lg-8">

                <div class="course-main-sticky">
                    <div class="tab-content">
                        <div class="tab-pane fade show active" id="tab1">

                            <!-- Tutor Course Main Segment Start -->
                            <div class="tutor-course-main-segment">

                                <!-- Tutor Course Segment Start -->
                                <div class="tutor-course-segment tutor-course-wrap">
                                    <h4 class="tutor-course-segment__title">Unit of Competency</h4>

                                    {% include 'emodule/partial/warning-message.html' with message=module.unit_of_competency %}

                                </div>
                                <!-- Tutor Course Segment End -->
                                
                                {% block lesson-content %}
                                <!-- Tutor Course Segment Start -->
                                <div class="tutor-course-segment tutor-course-wrap">
                                    <h4 class="tutor-course-segment__title">About This Module</h4>

                                    <!-- Tutor Course Segment Content Wrapper Start -->
                                    <div class="tutor-course-segment__content-wrap">
                                        <p>In this course, I take you from the fundamentals and concepts of data
                                            modeling all the way through a number of best practices and techniques that
                                            you’ll need to build data models in your organization. You’ll find many
                                            examples that clearly demonstrate the key concepts and techniques covered
                                            throughout the course.</p>
                                        <p>By the end of the course, you’ll be all set to not only put these principles
                                            to work, but also to make the key data modeling and design decisions
                                            required by the “art” of data modeling that transcend the nuts-and-bolts
                                            techniques and design patterns.</p>
                                        <p>Organisations, or groups of organisations, may establish the need for master
                                            data management when they hold more than one copy of data about a business
                                            entity. Holding more than one copy of this master data inherently means that
                                            there is an inefficiency in maintaining a “single version of the truth”
                                            across all copies. Unless people, processes and technology are in place to
                                            ensure that the data values are kept aligned across all copies, it is almost
                                            inevitable that different versions of information about a business entity
                                            will be held.</p>
                                    </div>
                                    <!-- Tutor Course Segment Content Wrapper End -->

                                </div>
                                <!-- Tutor Course Segment End -->
                                {% endblock lesson-content %}

                                <!-- Tutor Course Segment Start -->
                                <div class="tutor-course-segment tutor-course-wrap benefits-wrap">
                                    <h4 class="tutor-course-segment__title">Learning Outcomes</h4>

                                    <!-- Tutor Course Segment Benefits Items Start -->
                                    <div class="tutor-course-segment__benefits-items">
                                        {% if learning_outcomes %}
                                        {% for learning in learning_outcomes %}
                                        <div class="tutor-course-segment__benefit-item">
                                            <div class="tutor-course-segment__benefit-content">
                                                <i class="fas fa-check"></i>
                                                <span class="benefit-text">{{learning.text}}</span>
                                            </div>
                                        </div>
                                        {% endfor %}
                                        {% else %}

                                        {% include 'emodule/partial/warning-message.html' with message="None" %}
                                        
                                        {% endif %}
                                    </div>
                                    <!-- Tutor Course Segment Benefits Items End -->

                                </div>
                                <!-- Tutor Course Segment End -->

                            </div>
                            <!-- Tutor Course Main Segment End -->

                        </div>
                        <div class="tab-pane fade" id="tab2">

                            {% include 'emodule/module/module_detail_activity.html' %}

                        </div>
                    </div>
                </div>

            </div>
            <div class="col-lg-4">

                <!-- Tutor Course Sidebar Start -->
                <div class="tutor-course-sidebar sidebar-label">

                    {% emodule_status latest_result.latest.status as current_quiz_status %}
                    {% emodule_score quiz_score.latest.score as current_quiz_score %}

                    <!-- Tutor Course Price Preview Start -->
                    <div class="tutor-course-price-preview">
                        <div class="col-md-12">
                            <div class="contact-form__input">
                                <button 
                                id="id_activity_form_submit" 
                                class="btn btn-primary btn-hover-secondary w-100" 
                                {% if current_quiz_score or not quiz_list %}disabled{% endif %}
                                >Submit Quiz</button>
                            </div>
                        </div><br>
                        
                        <div class="tutor-course-price-preview__meta">
                            <ul class="tutor-course-meta-list">
                                <li>
                                    <div class="label"><i class="fas fa-info"></i> Status </div>
                                    <div class="value"><span>{% show_emodule_badge quiz_list current_quiz_status %}</span></div>
                                </li>
                                <li>
                                    <div class="label"><i class="fas fa-star"></i> Activity Score </div>
                                    <div class="value"><span>{{current_quiz_score}}</span></div>
                                </li>
                                <li>
                                    <div class="label"><i class="fas fa-list"></i> Number of Questions </div>
                                    <div class="value">{{module.quiz_count}}</div>
                                </li>
                                <li>
                                    <div class="label"><i class="fas fa-clock"></i> Duration </div>
                                    <div class="value">{{module.duration}}</div>
                                </li>
                            </ul>
                        </div>
                        <div class="tutor-course-segment">
                            <h4 class="tutor-course-segment__title">Module Lesson:</h4>
                            <p>{{module.module_lesson}}</p>
                        </div>
                    </div>
                    <!-- Tutor Course Price Preview End -->

                    <!-- Sidebar Widget Start -->
                    <div class="sidebar-widget border-0">
                        <h3 class="sidebar-widget__title">Other Modules in this Quarter</h3>

                        <div class="sidebar-widget__course">

                            {% for other_module in other_modules_in_quarter %}

                            {% emodule_status other_module.latest_result.latest.status as other_current_quiz_status %}
                            
                            <div class="sidebar-widget__course-item">
                                <div class="sidebar-widget__course-thumbnail">
                                    <a href="{% url 'emodule:module-detail' other_module.module_obj.quarter.subject.id other_module.module_obj.quarter.id other_module.module_obj.id %}">
                                        <img src="{% static 'emodule/images/courses/module-cover-sm.png' %}" alt="Courses"
                                            width="120" height="72">
                                    </a>
                                </div>
                                <div class="sidebar-widget__course-content">
                                    <h4 class="sidebar-widget__course-title"><a href="{% url 'emodule:module-detail' other_module.module_obj.quarter.subject.id other_module.module_obj.quarter.id other_module.module_obj.id %}">{{other_module.module_obj.title}}</a></h4>
                                    <div class="sidebar-widget__course-price">
                                        <div class="course-info-02__description">
                                            <p>{{other_module.module_obj.description}}</p>
                                        </div>
                                    </div>
                                    {% show_emodule_badge ther_module.module_obj.quiz_list other_current_quiz_status %}
                                </div>
                            </div>
                            {% endfor %}

                        </div>
                    </div>
                    <!-- Sidebar Widget End -->

                </div>
                <!-- Tutor Course Sidebar End -->

            </div>
        </div>


    </div>
</div>
<!-- Tutor Course Main content End -->
{% endblock content %}